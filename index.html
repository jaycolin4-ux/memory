<!DOCTYPE html>
<html lang="ru">

<head>
Â  Â  <meta charset="UTF-8">
Â  Â  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
Â  Â  <title>ĞœÑƒĞ·ĞµĞ¹ ĞŸĞĞœĞ¯Ğ¢Ğ¬ â€” Ğ˜Ğ½Ñ‚ĞµÑ€Ğ°ĞºÑ‚Ğ¸Ğ²</title>
Â  Â  <script src="https://cdn.tailwindcss.com"></script>
Â  Â  <script src="https://unpkg.com/html5-qrcode"></script>
Â  Â  <link
Â  Â  Â  Â  href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@700&family=Special+Elite&family=Roboto:wght@300;400;700&display=swap"
Â  Â  Â  Â  rel="stylesheet">
Â  Â  <style>
Â  Â  Â  Â  /* Ğ­Ñ„Ñ„ĞµĞºÑ‚ ÑÑ‚Ğ°Ñ€Ğ¾Ğ¹ Ğ¿Ğ»ĞµĞ½ĞºĞ¸ Ğ½Ğ° Ğ²ĞµÑÑŒ ÑĞºÑ€Ğ°Ğ½ */
Â  Â  Â  Â  body::after {
Â  Â  Â  Â  Â  Â  content: "";
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background: url('https://upload.wikimedia.org/wikipedia/commons/7/76/1k_Noise_Texture.png');
Â  Â  Â  Â  Â  Â  opacity: 0.03;
Â  Â  Â  Â  Â  Â  /* ĞÑ‡ĞµĞ½ÑŒ ÑĞ»Ğ°Ğ±Ñ‹Ğ¹ ÑˆÑƒĞ¼ */
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  Â  Â  z-index: 999;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ĞœÑĞ³ĞºĞ¾Ğµ Ğ·Ğ°Ñ‚ĞµĞ¼Ğ½ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾ ÑƒĞ³Ğ»Ğ°Ğ¼ */
Â  Â  Â  Â  .vignette {
Â  Â  Â  Â  Â  Â  position: fixed;
Â  Â  Â  Â  Â  Â  inset: 0;
Â  Â  Â  Â  Â  Â  background: radial-gradient(circle, transparent 50%, rgba(0, 0, 0, 0.8) 150%);
Â  Â  Â  Â  Â  Â  pointer-events: none;
Â  Â  Â  Â  Â  Â  z-index: 50;
Â  Â  Â  Â  }

Â  Â  Â  Â  :root {
Â  Â  Â  Â  Â  Â  --red: #8b0000;
Â  Â  Â  Â  Â  Â  --paper: #d2c1a5;
Â  Â  Â  Â  }

Â  Â  Â  Â  html,
Â  Â  Â  Â  body {
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  background: #0a0a0a;
Â  Â  Â  Â  Â  Â  color: #e5e5e5;
Â  Â  Â  Â  Â  Â  margin: 0;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  font-family: 'Roboto', sans-serif;
Â  Â  Â  Â  }

Â  Â  Â  Â  h1,
Â  Â  Â  Â  h2 {
Â  Â  Â  Â  Â  Â  font-family: 'Playfair Display', serif;
Â  Â  Â  Â  }

Â  Â  Â  Â  .page {
Â  Â  Â  Â  Â  Â  display: none;
Â  Â  Â  Â  Â  Â  height: 100vh;
Â  Â  Â  Â  Â  Â  overflow-y: auto;
Â  Â  Â  Â  Â  Â  -webkit-overflow-scrolling: touch;
Â  Â  Â  Â  Â  Â  padding-bottom: 120px;
Â  Â  Â  Â  }

Â  Â  Â  Â  .page.active {
Â  Â  Â  Â  Â  Â  display: block;
Â  Â  Â  Â  }

Â  Â  Â  Â  /* ĞĞ½Ğ¸Ğ¼Ğ°Ñ†Ğ¸Ğ¸ */
Â  Â  Â  Â  .fade-in-up {
Â  Â  Â  Â  Â  Â  animation: fadeInUp 0.6s ease forwards;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes fadeInUp {
Â  Â  Â  Â  Â  Â  from {
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(20px);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  to {
Â  Â  Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  Â  Â  transform: translateY(0);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  /* Ğ­Ñ„Ñ„ĞµĞºÑ‚ Ğ´Ñ€Ğ¾Ğ¶Ğ°Ğ½Ğ¸Ñ Ğ¿Ñ€Ğ¸ Ğ²ÑĞºÑ€Ñ‹Ñ‚Ğ¸Ğ¸ ÑĞµĞºÑ€ĞµÑ‚Ğ° */
Â  Â  Â  Â  .shake {
Â  Â  Â  Â  Â  Â  animation: shake 0.4s cubic-bezier(.36, .07, .19, .97) both;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes shake {

Â  Â  Â  Â  Â  Â  10%,
Â  Â  Â  Â  Â  Â  90% {
Â  Â  Â  Â  Â  Â  Â  Â  transform: translate3d(-1px, 0, 0);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  20%,
Â  Â  Â  Â  Â  Â  80% {
Â  Â  Â  Â  Â  Â  Â  Â  transform: translate3d(2px, 0, 0);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  30%,
Â  Â  Â  Â  Â  Â  50%,
Â  Â  Â  Â  Â  Â  70% {
Â  Â  Â  Â  Â  Â  Â  Â  transform: translate3d(-4px, 0, 0);
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  40%,
Â  Â  Â  Â  Â  Â  60% {
Â  Â  Â  Â  Â  Â  Â  Â  transform: translate3d(4px, 0, 0);
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }

Â  Â  Â  Â  .photo-box {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  height: 35vh;
Â  Â  Â  Â  Â  Â  background: #000;
Â  Â  Â  Â  }

Â  Â  Â  Â  .photo-main {
Â  Â  Â  Â  Â  Â  filter: grayscale(1) sepia(0.2);
Â  Â  Â  Â  Â  Â  transition: 2s cubic-bezier(0.4, 0, 0.2, 1);
Â  Â  Â  Â  Â  Â  width: 100%;
Â  Â  Â  Â  Â  Â  height: 100%;
Â  Â  Â  Â  Â  Â  object-fit: cover;
Â  Â  Â  Â  }

Â  Â  Â  Â  .alive .photo-main {
Â  Â  Â  Â  Â  Â  filter: grayscale(0) sepia(0);
Â  Â  Â  Â  Â  Â  transform: scale(1.08);
Â  Â  Â  Â  }

Â  Â  Â  Â  .folder {
Â  Â  Â  Â  Â  Â  background: var(--paper);
Â  Â  Â  Â  Â  Â  color: #2d2419;
Â  Â  Â  Â  Â  Â  font-family: 'Special Elite', serif;
Â  Â  Â  Â  Â  Â  max-height: 0;
Â  Â  Â  Â  Â  Â  opacity: 0;
Â  Â  Â  Â  Â  Â  overflow: hidden;
Â  Â  Â  Â  Â  Â  transition: all 0.8s ease;
Â  Â  Â  Â  Â  Â  border-radius: 4px;
Â  Â  Â  Â  Â  Â  box-shadow: inset 0 0 30px rgba(0, 0, 0, 0.2);
Â  Â  Â  Â  }

Â  Â  Â  Â  .folder.open {
Â  Â  Â  Â  Â  Â  max-height: 2000px;
Â  Â  Â  Â  Â  Â  opacity: 1;
Â  Â  Â  Â  Â  Â  padding: 25px;
Â  Â  Â  Â  Â  Â  margin-top: 40px;
Â  Â  Â  Â  Â  Â  border: 1px solid #bba689;
Â  Â  Â  Â  }

Â  Â  Â  Â  .seal {
Â  Â  Â  Â  Â  Â  width: 85px;
Â  Â  Â  Â  Â  Â  height: 85px;
Â  Â  Â  Â  Â  Â  background: #900;
Â  Â  Â  Â  Â  Â  border: 4px double #500;
Â  Â  Â  Â  Â  Â  border-radius: 50%;
Â  Â  Â  Â  Â  Â  color: white;
Â  Â  Â  Â  Â  Â  font-size: 9px;
Â  Â  Â  Â  Â  Â  font-weight: bold;
Â  Â  Â  Â  Â  Â  display: flex;
Â  Â  Â  Â  Â  Â  align-items: center;
Â  Â  Â  Â  Â  Â  justify-content: center;
Â  Â  Â  Â  Â  Â  text-align: center;
Â  Â  Â  Â  Â  Â  cursor: pointer;
Â  Â  Â  Â  Â  Â  transition: 0.5s;
Â  Â  Â  Â  Â  Â  margin: -42px auto 0;
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  z-index: 20;
Â  Â  Â  Â  Â  Â  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.4);
Â  Â  Â  Â  }

Â  Â  Â  Â  .seal.broken {
Â  Â  Â  Â  Â  Â  transform: scale(0.8) rotate(-25deg) translateY(10px);
Â  Â  Â  Â  Â  Â  filter: grayscale(0.5);
Â  Â  Â  Â  Â  Â  opacity: 0.8;
Â  Â  Â  Â  }

Â  Â  Â  Â  #reader {
Â  Â  Â  Â  Â  Â  position: relative;
Â  Â  Â  Â  Â  Â  background: #111;
Â  Â  Â  Â  }

Â  Â  Â  Â  #reader::after {
Â  Â  Â  Â  Â  Â  content: "";
Â  Â  Â  Â  Â  Â  position: absolute;
Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  left: 0;
Â  Â  Â  Â  Â  Â  right: 0;
Â  Â  Â  Â  Â  Â  height: 2px;
Â  Â  Â  Â  Â  Â  background: #ff0000;
Â  Â  Â  Â  Â  Â  box-shadow: 0 0 15px #ff0000;
Â  Â  Â  Â  Â  Â  animation: scanning 2s infinite;
Â  Â  Â  Â  }

Â  Â  Â  Â  @keyframes scanning {
Â  Â  Â  Â  Â  Â  0% {
Â  Â  Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  50% {
Â  Â  Â  Â  Â  Â  Â  Â  top: 100%;
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  100% {
Â  Â  Â  Â  Â  Â  Â  Â  top: 0;
Â  Â  Â  Â  Â  Â  }
Â  Â  Â  Â  }
Â  Â  </style>
</head>

<body>

Â  Â  <nav
Â  Â  Â  Â  class="fixed bottom-0 w-full bg-black/95 border-t border-white/10 flex justify-around p-4 z-[100] backdrop-blur-lg">
Â  Â  Â  Â  <button onclick="showPage('home')" class="flex flex-col items-center gap-1 transition active:scale-90">
Â  Â  Â  Â  Â  Â  <span class="text-xl">ğŸ“‚</span><span class="text-[9px] uppercase tracking-widest opacity-60">ĞÑ€Ñ…Ğ¸Ğ²</span>
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button onclick="showPage('scanner')"
Â  Â  Â  Â  Â  Â  class="bg-[#8b0000] p-4 -mt-12 rounded-full border-4 border-[#0a0a0a] shadow-2xl transition active:scale-90">
Â  Â  Â  Â  Â  Â  <span class="text-xl">ğŸ“·</span>
Â  Â  Â  Â  </button>
Â  Â  Â  Â  <button onclick="alert('ĞÑƒĞ´Ğ¸Ğ¾Ğ³Ğ¸Ğ´ ÑĞºĞ¾Ñ€Ğ¾ Ğ¿Ğ¾ÑĞ²Ğ¸Ñ‚ÑÑ')"
Â  Â  Â  Â  Â  Â  class="flex flex-col items-center gap-1 transition active:scale-90">
Â  Â  Â  Â  Â  Â  <span class="text-xl">ğŸ§</span><span class="text-[9px] uppercase tracking-widest opacity-60">Ğ“Ğ¾Ğ»Ğ¾Ñ</span>
Â  Â  Â  Â  </button>
Â  Â  </nav>

Â  Â  <div id="home" class="page active p-6">
Â  Â  Â  Â  <div class="flex items-center gap-2 mb-4 px-1">
Â  Â  Â  Â  Â  Â  <div class="w-2 h-2 bg-red-600 rounded-full animate-ping"></div>
Â  Â  Â  Â  Â  Â  <span class="text-[9px] text-white/40 uppercase tracking-[2px] font-bold">ĞÑ€Ñ…Ğ¸Ğ²: Ğ¡Ğ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğµ
Â  Â  Â  Â  Â  Â  Â  Â  ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²Ğ»ĞµĞ½Ğ¾</span>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="py-12 border-b border-white/10 mb-8 fade-in-up">
Â  Â  Â  Â  Â  Â  <h1 class="text-4xl tracking-tighter uppercase leading-none">ĞœÑƒĞ·ĞµĞ¹<br><span
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  class="text-[#8b0000]">ĞŸĞ°Ğ¼ÑÑ‚ÑŒ</span></h1>
Â  Â  Â  Â  Â  Â  <p class="text-[10px] text-gray-500 tracking-[3px] mt-4 italic font-light">Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ğ² Ñ€ĞµĞ°Ğ»ÑŒĞ½Ğ¾Ğ¼ Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ¸</p>
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div class="mb-6 fade-in-up" style="animation-delay: 0.1s">
Â  Â  Â  Â  Â  Â  <input type="text" id="searchInput" oninput="filterExhibits()" placeholder="ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ Ğ½Ğ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ñ Ğ¸Ğ»Ğ¸ Ğ°Ğ²Ñ‚Ğ¾Ñ€Ñƒ..."
Â  Â  Â  Â  Â  Â  Â  Â  class="w-full bg-white/5 border border-white/10 rounded-xl p-4 text-sm focus:outline-none focus:border-[#8b0000] transition-all">
Â  Â  Â  Â  </div>
Â  Â  Â  Â  <div id="list" class="space-y-4">
Â  Â  Â  Â  Â  Â  <div class="bg-white/5 p-5 rounded-2xl flex items-center gap-4 animate-pulse">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-16 h-16 bg-white/10 rounded-xl"></div>
Â  Â  Â  Â  Â  Â  Â  Â  <div class="flex-1 space-y-2">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="h-4 bg-white/10 rounded w-3/4"></div>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <div class="h-3 bg-white/5 rounded w-1/2"></div>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>

Â  Â  <div id="scanner" class="page p-6">
Â  Â  Â  Â  <h2 class="text-2xl text-center mb-8 font-bold uppercase tracking-widest">ĞĞ°Ğ²ĞµĞ´Ğ¸Ñ‚Ğµ Ğ½Ğ° ÑˆĞ¸Ñ„Ñ€</h2>
Â  Â  Â  Â  <div id="reader" class="rounded-3xl overflow-hidden border border-white/10 shadow-2xl"></div>
Â  Â  Â  Â  <button onclick="showPage('home')"
Â  Â  Â  Â  Â  Â  class="w-full mt-8 p-4 text-xs uppercase tracking-widest opacity-50">ĞÑ‚Ğ¼ĞµĞ½Ğ°</button>
Â  Â  </div>

Â  Â  <div id="details" class="page">
Â  Â  Â  Â  <div id="photo-box" class="photo-box" onclick="this.classList.toggle('alive')">
Â  Â  Â  Â  Â  Â  <img id="ex-img" class="photo-main" src="">
Â  Â  Â  Â  Â  Â  <div class="absolute inset-0 bg-gradient-to-t from-[#0a0a0a] via-transparent to-black/40"></div>
Â  Â  Â  Â  Â  Â  <button onclick="closeDetails()"
Â  Â  Â  Â  Â  Â  Â  Â  class="absolute top-6 left-6 w-10 h-10 bg-black/50 backdrop-blur-md rounded-full flex items-center justify-center text-white">âœ•</button>
Â  Â  Â  Â  Â  Â  <div class="absolute bottom-6 left-6 right-6">
Â  Â  Â  Â  Â  Â  Â  Â  <h2 id="ex-title" class="text-3xl font-bold leading-tight"></h2>
Â  Â  Â  Â  Â  Â  Â  Â  <p id="ex-author" class="text-[#8b0000] font-bold text-xs uppercase mt-1 tracking-widest"></p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>

Â  Â  Â  Â  <div class="p-6" id="details-content">
Â  Â  Â  Â  Â  Â  <div class="bg-white/5 p-4 rounded-2xl border border-white/10 mb-8 flex items-center gap-4">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="w-10 h-10 bg-[#8b0000] rounded-full flex items-center justify-center animate-pulse">ğŸ§</div>
Â  Â  Â  Â  Â  Â  Â  Â <audio id="ex-audio" controls preload="metadata" playsinline class="w-full h-8 accent-[#8b0000]"></audio>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <p id="ex-desc" class="text-gray-300 font-light leading-relaxed mb-12 text-lg"></p>

Â  Â  Â  Â  Â  Â  <div id="seal" class="seal" onclick="openSecret()">
Â  Â  Â  Â  Â  Â  Â  Â  <span class="p-2">Ğ“Ğ Ğ˜Ğ¤ Ğ¡Ğ•ĞšĞ Ğ•Ğ¢ĞĞ Ğ ĞĞ¡Ğ¡Ğ•ĞšĞ Ğ•Ğ¢Ğ˜Ğ¢Ğ¬</span>
Â  Â  Â  Â  Â  Â  </div>

Â  Â  Â  Â  Â  Â  <div id="folder" class="folder">
Â  Â  Â  Â  Â  Â  Â  Â  <div class="border-2 border-black/10 p-4 rounded-sm">
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-[10px] uppercase font-black mb-4 border-b border-black/20 pb-2">ĞÑ€Ñ…Ğ¸Ğ²Ğ½Ğ°Ñ Ğ²Ñ‹Ğ¿Ğ¸ÑĞºĞ°
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  â„–24/Ğ±-ĞŸĞĞœĞ¯Ğ¢Ğ¬</p>
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  <p id="ex-secret" class="italic leading-loose text-sm"></p>
Â  Â  Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  </div>
Â  Â  </div>
<script>
let exhibits = [];
const spreadsheetUrl = 'https://docs.google.com/spreadsheets/d/e/2PACX-1vSh-Mi4ZmM4ZZZwXsjAkVDUNeRQJPhe_kzWWR0p4GzScVUnkzR4Ci4t_GsSSz22Z0T886mnbJENA21Q/pub?gid=0&single=true&output=csv';

async function loadData() {
Â  Â  try {
Â  Â  Â  Â  const response = await fetch(`${spreadsheetUrl}&cb=${Date.now()}`);
Â  Â  Â  Â  const csvText = await response.text();
Â  Â  Â  Â Â 
Â  Â  Â  Â  // Ğ Ğ°Ğ·Ğ±Ğ¸Ğ²Ğ°ĞµĞ¼ Ğ½Ğ° ÑÑ‚Ñ€Ğ¾ĞºĞ¸ Ğ¿Ğ¾ ÑĞ¸Ğ¼Ğ²Ğ¾Ğ»Ñƒ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑĞ°, Ğ½Ğ¾ Ğ¸Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€ÑƒĞµĞ¼ Ğ¿ĞµÑ€ĞµĞ½Ğ¾ÑÑ‹ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ°Ğ²Ñ‹Ñ‡ĞµĞº
Â  Â  Â  Â  const allRows = csvText.split(/\r?\n/);
Â  Â  Â  Â  const dataRows = allRows.slice(1); // Ğ£Ğ±Ğ¸Ñ€Ğ°ĞµĞ¼ Ğ·Ğ°Ğ³Ğ¾Ğ»Ğ¾Ğ²Ğ¾Ğº

Â  Â  Â  Â  exhibits = dataRows.map(row => {
Â  Â  Â  Â  Â  Â  // Ğ£Ğ¼Ğ½Ğ¾Ğµ Ñ€Ğ°Ğ·Ğ´ĞµĞ»ĞµĞ½Ğ¸Ğµ CSV: Ğ·Ğ°Ğ¿ÑÑ‚Ğ°Ñ ÑÑ‡Ğ¸Ñ‚Ğ°ĞµÑ‚ÑÑ Ñ€Ğ°Ğ·Ğ´ĞµĞ»Ğ¸Ñ‚ĞµĞ»ĞµĞ¼, Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ Ğ¾Ğ½Ğ° Ğ½Ğµ Ğ²Ğ½ÑƒÑ‚Ñ€Ğ¸ ĞºĞ°Ğ²Ñ‹Ñ‡ĞµĞº
Â  Â  Â  Â  Â  Â  const cols = row.match(/(".*?"|[^,]+|(?<=,)(?=,)|(?<=,)$|^$)/g) || [];
Â  Â  Â  Â  Â  Â  const clean = (val) => val ? val.replace(/^"|"$/g, '').trim() : '';
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  return {
Â  Â  Â  Â  Â  Â  Â  Â  id: clean(cols[0]),
Â  Â  Â  Â  Â  Â  Â  Â  title: clean(cols[1]),
Â  Â  Â  Â  Â  Â  Â  Â  author: clean(cols[2]),
Â  Â  Â  Â  Â  Â  Â  Â  img: clean(cols[3]),
Â  Â  Â  Â  Â  Â  Â  Â  audio: clean(cols[4]),
Â  Â  Â  Â  Â  Â  Â  Â  desc: clean(cols[5]),
Â  Â  Â  Â  Â  Â  Â  Â  secret: clean(cols[6])
Â  Â  Â  Â  Â  Â  };
Â  Â  Â  Â  }).filter(ex => ex.id && ex.title);

Â  Â  Â  Â  console.log("Ğ—Ğ°Ğ³Ñ€ÑƒĞ¶ĞµĞ½Ğ½Ñ‹Ğµ ÑĞºÑĞ¿Ğ¾Ğ½Ğ°Ñ‚Ñ‹:", exhibits);
Â  Â  Â  Â  renderHome(exhibits);
Â  Â  } catch (e) {
Â  Â  Â  Â  console.error('ĞÑˆĞ¸Ğ±ĞºĞ° Ğ·Ğ°Ğ³Ñ€ÑƒĞ·ĞºĞ¸:', e);
Â  Â  }
}

function renderHome(dataToRender) {
Â  Â  const listEl = document.getElementById('list');
Â  Â  const data = dataToRender || exhibits;
Â  Â  if (data.length === 0) {
Â  Â  Â  Â  listEl.innerHTML = '<div class="text-center opacity-30 py-10 italic">ĞÑ€Ñ…Ğ¸Ğ² Ğ¿ÑƒÑÑ‚ Ğ¸Ğ»Ğ¸ Ğ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµÑ‚ÑÑ...</div>';
Â  Â  Â  Â  return;
Â  Â  }
Â  Â  listEl.innerHTML = data.map(ex => `
Â  Â  Â  Â  <div onclick="openExhibit('${ex.id}')" class="fade-in-up bg-[#151515] p-5 rounded-2xl flex items-center gap-4 border border-white/5 active:scale-[0.98] transition-all">
Â  Â  Â  Â  Â  Â  <div class="w-16 h-16 flex-shrink-0">
Â  Â  Â  Â  Â  Â  Â  Â  <img src="${ex.img}" class="w-full h-full object-cover grayscale rounded-xl shadow-lg"Â 
Â  Â  Â  Â  Â  Â  Â  Â  Â  Â  Â onerror="this.src='https://via.placeholder.com/100?text=ĞÑˆĞ¸Ğ±ĞºĞ°+Ñ„Ğ¾Ñ‚Ğ¾'">
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <div class="flex-1 text-left">
Â  Â  Â  Â  Â  Â  Â  Â  <h3 class="font-bold text-base uppercase tracking-tight text-white leading-tight">${ex.title}</h3>
Â  Â  Â  Â  Â  Â  Â  Â  <p class="text-[11px] text-[#8b0000] mt-1 font-medium tracking-wider uppercase opacity-80">${ex.author}</p>
Â  Â  Â  Â  Â  Â  </div>
Â  Â  Â  Â  Â  Â  <span class="text-white/20 text-xl">â†’</span>
Â  Â  Â  Â  </div>
Â  Â  `).join('');
}

function filterExhibits() {
Â  Â  const q = document.getElementById('searchInput').value.toLowerCase();
Â  Â  const filtered = exhibits.filter(ex =>
Â  Â  Â  Â  ex.title.toLowerCase().includes(q) || ex.author.toLowerCase().includes(q)
Â  Â  );
Â  Â  renderHome(filtered);
}

function showPage(id) {
Â  Â  document.querySelectorAll('.page').forEach(p => p.classList.remove('active'));
Â  Â  const targetPage = document.getElementById(id);
Â  Â  if (targetPage) targetPage.classList.add('active');
Â  Â Â 
Â  Â  if (id === 'scanner') startScanner(); else stopScanner();
}

function openExhibit(id) {
    const targetId = String(id).trim().toLowerCase();
    const ex = exhibits.find(e => String(e.id).trim().toLowerCase() === targetId);
    
    if (!ex) {
        console.error("ID Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½:", targetId);
        alert("ĞĞ±ÑŠĞµĞºÑ‚ " + targetId + " Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ² Ğ°Ñ€Ñ…Ğ¸Ğ²Ğµ.");
        showPage('home');
        return;
    }

    if (window.navigator.vibrate) window.navigator.vibrate(40);

    document.getElementById('ex-title').innerText = ex.title;
    document.getElementById('ex-author').innerText = ex.author;
    document.getElementById('ex-desc').innerText = ex.desc;
    document.getElementById('ex-secret').innerText = ex.secret;
    document.getElementById('ex-img').src = ex.img;

    // --- Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ• ĞĞ£Ğ”Ğ˜Ğ ---
    let audioUrl = ex.audio;
    
    // ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Google Drive Ğ² Ğ¿Ñ€ÑĞ¼Ğ¾Ğ¹ Ğ¿Ğ¾Ñ‚Ğ¾Ğº
    if (audioUrl.includes('drive.google.com')) {
        let fileId = "";
        if (audioUrl.includes('id=')) {
            fileId = audioUrl.split('id=')[1].split('&')[0];
        } else if (audioUrl.includes('/d/')) {
            fileId = audioUrl.split('/d/')[1].split('/')[0];
        }
        // Ğ—Ğ°Ğ¼ĞµĞ½ÑĞµĞ¼ Ğ½Ğ° download - ÑÑ‚Ğ¾ ĞºÑ€Ğ¸Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸ Ğ²Ğ°Ğ¶Ğ½Ğ¾ Ğ´Ğ»Ñ Ñ‚ĞµĞ³Ğ° <audio>
        audioUrl = `https://docs.google.com/uc?export=download&id=${fileId}`;
    }
    
    // ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Dropbox
    if (audioUrl.includes('dropbox.com')) {
        audioUrl = audioUrl.replace('www.dropbox.com', 'dl.dropboxusercontent.com').replace('?dl=0', '').replace('?dl=1', '') + '?raw=1';
    }

    const player = document.getElementById('ex-audio');
    player.src = audioUrl;
    player.load(); 
    // ĞĞ° Ğ½ĞµĞºĞ¾Ñ‚Ğ¾Ñ€Ñ‹Ñ… Ğ¼Ğ¾Ğ±Ğ¸Ğ»ÑŒĞ½Ñ‹Ñ… Ğ±Ñ€Ğ°ÑƒĞ·ĞµÑ€Ğ°Ñ… Ğ°Ğ²Ñ‚Ğ¾Ğ¿Ğ»ĞµĞ¹ Ğ·Ğ°Ğ¿Ñ€ĞµÑ‰ĞµĞ½, 
    // Ğ¿Ğ¾ÑÑ‚Ğ¾Ğ¼Ñƒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ´Ğ¾Ğ»Ğ¶ĞµĞ½ ÑĞ°Ğ¼ Ğ½Ğ°Ğ¶Ğ°Ñ‚ÑŒ Play, Ğ½Ğ¾ load() Ğ¿Ğ¾Ğ´Ğ³Ğ¾Ñ‚Ğ¾Ğ²Ğ¸Ñ‚ Ñ„Ğ°Ğ¹Ğ».
    // ------------------------

    document.getElementById('photo-box').classList.remove('alive');
    document.getElementById('folder').classList.remove('open');
    document.getElementById('seal').classList.remove('broken');

    showPage('details');
}

Â  Â  if (window.navigator.vibrate) window.navigator.vibrate(40);

Â  Â  document.getElementById('ex-title').innerText = ex.title;
Â  Â  document.getElementById('ex-author').innerText = ex.author;
Â  Â  document.getElementById('ex-desc').innerText = ex.desc;
Â  Â  document.getElementById('ex-secret').innerText = ex.secret;
Â  Â  document.getElementById('ex-img').src = ex.img;

Â  Â  // --- Ğ˜Ğ¡ĞŸĞ ĞĞ’Ğ›Ğ•ĞĞ˜Ğ• ĞĞ£Ğ”Ğ˜Ğ ---
Â  Â  let audioUrl = ex.audio;
Â  Â Â 
Â  Â  // ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Google Drive
Â  Â  if (audioUrl.includes('drive.google.com')) {
Â  Â  Â  Â  let fileId = "";
Â  Â  Â  Â  if (audioUrl.includes('id=')) {
Â  Â  Â  Â  Â  Â  fileId = audioUrl.split('id=')[1].split('&')[0];
Â  Â  Â  Â  } else {
Â  Â  Â  Â  Â  Â  fileId = audioUrl.split('/d/')[1].split('/')[0];
Â  Â  Â  Â  }
Â  Â  Â  Â  audioUrl = `https://docs.google.com/uc?export=open&id=${fileId}`;
Â  Â  }
Â  Â Â 
Â  Â  // ĞŸÑ€ĞµĞ¾Ğ±Ñ€Ğ°Ğ·Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ Dropbox
Â  Â  if (audioUrl.includes('dropbox.com')) {
Â  Â  Â  Â  audioUrl = audioUrl.replace('?dl=0', '').replace('?dl=1', '') + '?raw=1';
Â  Â  }

Â  Â  const player = document.getElementById('ex-audio');
Â  Â  player.src = audioUrl;
Â  Â  player.load(); // ĞŸĞµÑ€ĞµĞ·Ğ°Ğ³Ñ€ÑƒĞ¶Ğ°ĞµĞ¼ Ğ¿Ğ»ĞµĞµÑ€ Ğ´Ğ»Ñ Ğ¿Ñ€Ğ¸Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ½Ğ¾Ğ²Ğ¾Ğ¹ ÑÑÑ‹Ğ»ĞºĞ¸
Â  Â  // ------------------------

Â  Â  document.getElementById('photo-box').classList.remove('alive');
Â  Â  document.getElementById('folder').classList.remove('open');
Â  Â  document.getElementById('seal').classList.remove('broken');

Â  Â  showPage('details');
}

Â  Â  if (window.navigator.vibrate) window.navigator.vibrate(40);

Â  Â  document.getElementById('ex-title').innerText = ex.title;
Â  Â  document.getElementById('ex-author').innerText = ex.author;
Â  Â  document.getElementById('ex-desc').innerText = ex.desc;
Â  Â  document.getElementById('ex-secret').innerText = ex.secret;
Â  Â  document.getElementById('ex-img').src = ex.img;
Â  Â  document.getElementById('ex-audio').src = ex.audio;

Â  Â  document.getElementById('photo-box').classList.remove('alive');
Â  Â  document.getElementById('folder').classList.remove('open');
Â  Â  document.getElementById('seal').classList.remove('broken');

Â  Â  showPage('details');
}

function openSecret() {
Â  Â  const content = document.getElementById('details');
Â  Â  content.classList.add('shake');
Â  Â  setTimeout(() => content.classList.remove('shake'), 500);
Â  Â  if (window.navigator.vibrate) window.navigator.vibrate([100, 50, 100]);
Â  Â  document.getElementById('folder').classList.add('open');
Â  Â  document.getElementById('seal').classList.add('broken');
Â  Â  new Audio('https://www.soundjay.com/human/paper-rip-1.mp3').play().catch(() => {});
}

function closeDetails() {
Â  Â  const audio = document.getElementById('ex-audio');
Â  Â  audio.pause();
Â  Â  audio.currentTime = 0;
Â  Â  showPage('home');
}

let html5QrCode;
function startScanner() {
Â  Â  html5QrCode = new Html5Qrcode("reader");
Â  Â  html5QrCode.start(
Â  Â  Â  Â  { facingMode: "environment" },Â 
Â  Â  Â  Â  { fps: 20, qrbox: 250 },Â 
Â  Â  Â  Â  (decodedText) => {
Â  Â  Â  Â  Â  Â  new Audio('https://www.soundjay.com/mechanical/camera-shutter-click-01.mp3').play().catch(() => {});
Â  Â  Â  Â  Â  Â  document.body.style.filter = "brightness(2)";
Â  Â  Â  Â  Â  Â  setTimeout(() => document.body.style.filter = "brightness(1)", 150);
Â  Â  Â  Â  Â  Â Â 
Â  Â  Â  Â  Â  Â  stopScanner();Â 

Â  Â  Â  Â  Â  Â  let rawData = decodedText.trim();
Â  Â  Â  Â  Â  Â  let finalId = rawData;

Â  Â  Â  Â  Â  Â  if (rawData.includes('id=')) {
Â  Â  Â  Â  Â  Â  Â  Â  finalId = rawData.split('id=').pop().split('&')[0];
Â  Â  Â  Â  Â  Â  }

Â  Â  Â  Â  Â  Â  openExhibit(finalId);Â 
Â  Â  Â  Â  }
Â  Â  ).catch(err => console.error("ĞÑˆĞ¸Ğ±ĞºĞ° ĞºĞ°Ğ¼ĞµÑ€Ñ‹:", err));
}

function stopScanner() {
Â  Â  if (html5QrCode && html5QrCode.isScanning) {
Â  Â  Â  Â  html5QrCode.stop().then(() => html5QrCode.clear()).catch(err => console.log(err));
Â  Â  }
}

window.onload = () => {
Â  Â  loadData();
Â  Â  const urlParams = new URLSearchParams(window.location.search);
Â  Â  const directId = urlParams.get('id');
Â  Â  if (directId) {
Â  Â  Â  Â  setTimeout(() => openExhibit(directId), 1500);
Â  Â  }
Â  Â  setInterval(loadData, 30000);
};
</script>

</body>


</html>






